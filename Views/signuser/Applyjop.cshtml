@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    var photoName = Context.Session.GetString("ProfilePhoto") ?? "/img/apple-touch-icon.png";
    var Name = Context.Session.GetString("user_Name");
}
}
@model JobWithCompanyViewModel 

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <title>User Home</title>
    <meta content="" name="description">
    <meta content="" name="keywords">

    <!-- Favicons -->
    <link href="~/img/favicon.png" rel="icon">
    <link href="~/img/apple-touch-icon.png" rel="apple-touch-icon">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

    <!-- Vendor CSS Files -->
    <link href="~/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="~/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="~/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
    <link href="~/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
    <link href="~/vendor/remixicon/remixicon.css" rel="stylesheet">
    <link href="~/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

    <!-- Template Main CSS File -->
    <link href="~/css/style.css" rel="stylesheet">


</head>

<body>

    <!-- ======= Header ======= -->
    <header id="header" class="fixed-top ">
        <div class="container d-flex align-items-center justify-content-between">

            <h1 class="logo"><a href="HomeUser.html">Wuzfni</a></h1>

            <nav id="navbar" class="navbar ">

                <ul>
                    <li><a class="nav-link scrollto active p-2 p-lg-3" href=@Url.Action("homeuser", "signuser")#>Home</a></li>
                    <li><a class="nav-link scrollto p-2 p-lg-3" href=@Url.Action("homeuser", "signuser")#category">category</a></li>
                    <li><a class="nav-link scrollto p-2 p-lg-3" href=@Url.Action("searchjop", "signuser")>Find Jobs</a></li>
                    <li><a class="nav-link scrollto p-2 p-lg-3" href=@Url.Action("homeuser", "signuser")#contact>Contact</a></li>
                </ul>
            </nav>

            <!-- <i class="bi bi-list mobile-nav-toggle"></i> -->
            <nav class="header-nav ms-auto">
                <ul class="d-flex align-items-center">

                    <!-- <li class="nav-item d-block d-lg-none">
                      <a class="nav-link nav-icon search-bar-toggle " href="#">
                        <i class="bi bi-search"></i>
                      </a>
                    </li> -->
                    <!-- End Search Icon-->

                    <div class="dropdown">
                        <a class="nav-link nav-profile d-flex align-items-center pe-2" id="dropdownMenuButton2" href="#" data-bs-toggle="dropdown">
                            <img src="   @(Url.Content("~/uploads/" +  photoName))" alt="Profile" class="rounded-circle dropdown-toggle">
                        </a>
                        <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="dropdownMenuButton2">
                            <li><a class="dropdown-item " href="index.html" onclick="logout()">Sign out</a></li>
                        </ul>
                    </div>
                    <a class="nav-link nav-profile d-flex align-items-center pe-2" href="user-edit-account.html">
                        <span class="d-none d-md-block  ps-2">@Name</span>
                    </a>
                </ul>
            </nav>

        </div>
    </header>
    <!-- End Header -->


    <main id="main" class="main">

        <div class="pagetitle">
            <h1>Jobs</h1>
            <nav>
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="HomeUser.html">Home</a></li>
                    <li class="breadcrumb-item "><a href="searchJob-aftersign.html">Jobs</a></li>
                    <li class="breadcrumb-item active">Apply Jobs</li>
                </ol>
            </nav>
        </div><!-- End Page Title -->
       
        <section class="section-search">
            <div class="row">

                <div class="col-xl-8 m-lg-auto">
                    <div class="card">
                        <div class="applyjob">
                            <div class="container mt-5">
                                <div class="card shadow-lg rounded-4 p-4 border-0">
                                    <div class="card-body">
                                        <!-- Job Title -->
                                        <h1 class="mb-3 text-primary fw-bold">@Model.Job.job_name</h1>

                                        <!-- Company Info -->
                                        <div class="mb-4">
                                            <h5 class="text-muted">
                                                Posted by:
                                                <span class="fw-bold">@Model.Company.emp_fname @Model.Company.emp_lname</span>
                                            </h5>
                                            <p class="mb-1">
                                                <i class="bi bi-building text-secondary"></i>
                                                <strong>Company:</strong> @Model.Company.emp_fname
                                            </p>
                                            <p>
                                                <i class="bi bi-geo-alt-fill text-danger"></i>
                                                <strong>Location:</strong> @Model.Job.country, @Model.Job.government
                                            </p>
                                        </div>

                                        <hr>

                                        <!-- Job Description -->
                                        <div class="mb-4">
                                            <h4 class="text-secondary">Job Description</h4>
                                            <p class="lead text-dark">@Model.Job.job_details</p>
                                        </div>

                                        <!-- Job Info -->
                                        <div class="row mb-4">
                                            <div class="col-md-6 mb-3">
                                                <h6><i class="bi bi-layers-fill text-info"></i> Field:</h6>
                                                <p>@Model.Job.job_field</p>
                                            </div>
                                            <div class="col-md-6 mb-3">
                                                <h6><i class="bi bi-currency-dollar text-success"></i> Salary Range:</h6>
                                                <p>@Model.Job.MinimumSalary - @Model.Job.MaximumSalary EGP</p>
                                            </div>
                                            <div class="col-md-6 mb-3">
                                                <h6><i class="bi bi-calendar-event text-warning"></i> Posted Date:</h6>
                                                <p></p> <!-- adjust date field if needed -->
                                            </div>
                                        </div>

                                        <!-- Job Requirements -->
                                        <div class="bg-light rounded-3 p-4 mb-4">
                                            <h4 class="mb-3 text-primary"><i class="bi bi-list-check"></i> Job Requirements</h4>
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item"><strong>Age:</strong> @Model.Job.age years</li>
                                                <li class="list-group-item"><strong>Education Level:</strong> @Model.Job.educational_level</li>
                                                <li class="list-group-item"><strong>Experience:</strong> @Model.Job.years_of_experience years</li>
                                                <li class="list-group-item"><strong>Gender:</strong> @Model.Job.Gender</li>
                                            </ul>
                                        </div>

                                        <button id="showFormButton">Apply Job Now</button>

                                        <div id="formOverlay" class="hidden" style="display: none;">
                                            <div id="formContainer">
                                                <span id="closeFormButton">&times;</span>

                                                @if (  ViewBag.CanApply == true)
                                                {
                                                    <form asp-action="ApplyjopWithuser" asp-controller="signuser" method="post">
                                                        @Html.ValidationSummary(true)
                                                        <input type="hidden" name="jobid" value="@Model.Job.job_id" />
                                                        <input type="hidden" name="company" value="@Model.Company.companyName" />
                                                        <input type="hidden" name="job_name" value="@Model.Job.job_name" />
                                                        <input type="hidden" name="Userid" value="@Model.User.UserId" />
                                                        <input type="hidden" name="request_state" value="Panding" />
                                                        

                                                        <h2>Are you looking for a job? Register now</h2>

                                                        <label for="firstName">First Name</label>
                                                        <input type="text" name="FirstName" value="@Model.User.Name" class="form-control" readonly />

                                                        <label for="lastName">Last Name</label>
                                                        <input type="text" name="LastName" value="@Model.User.EducationLevel" class="form-control" readonly />

                                                        <label for="age">Age</label>
                                                        <input type="number" name="Age" value="@Model.User.Age" class="form-control" readonly />

                                                        <label for="country">Country</label>
                                                        <input type="text"  name="Country" value="@Model.User.Country" class="form-control" readonly />

                                                        <label for="government">Governorate</label>
                                                        <input type="text" name="Government" value="@Model.User.Government" class="form-control" readonly />

                                                        <button type="submit" class="btn btn-primary mt-3">Apply Job Now</button>
                                                    </form>
                                                }
                                                else
                                                {
                                                    <p>You do not meet the job requirements and cannot apply for this job.</p>
                                                }

                                                <div id="successMessage" style="display:none;">
                                                    <p>Congratulations, your application has been submitted successfully.</p>
                                                    <button id="returnButton" class="btn btn-secondary">Back to Home Page</button>
                                                </div>
                                            </div>
                                        </div>
                                <script>
                                    document.getElementById('showFormButton').addEventListener('click', function() {
                                      document.getElementById('formOverlay').style.display = 'block';
                                    });
                                    document.getElementById('closeFormButton').addEventListener('click', function() {
                                      document.getElementById('formOverlay').style.display = 'none';
                                    });
                                </script>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </section>
        <?php endif; ?>
    </main>
    <!-- End #main -->
    <!-- ======= Footer ======= -->
    <footer id="footer" class="footer">

        <div class="container">
            <div class="row gy-4">
                <div class="col-lg-5 col-md-12 footer-info">
                    <a href="index.html" class="logo d-flex align-items-center">
                        <span>Wuzfni</span>
                    </a>
                    <p>wuzfni website is not an employment company and provides all its services to those seeking work for free without paying any fees</p>
                    <div class="social-links d-flex mt-4">
                        <a href="#" class="twitter"><i class="bi bi-twitter"></i></a>
                        <a href="#" class="facebook"><i class="bi bi-facebook"></i></a>
                        <a href="#" class="instagram"><i class="bi bi-instagram"></i></a>
                        <a href="#" class="linkedin"><i class="bi bi-linkedin"></i></a>
                    </div>
                </div>

                <div class="col-lg-2 col-6 footer-links">
                    <h4>Links</h4>
                    <ul>
                        <li><a class="nav-link scrollto active p-2 p-lg-3" href=@Url.Action("homeuser", "signuser")#>Home</a></li>
                        <li><a class="nav-link scrollto p-2 p-lg-3" href=@Url.Action("homeuser", "signuser")#category">category</a></li>
                        <li><a class="nav-link scrollto p-2 p-lg-3" href=@Url.Action("searchjop", "signuser")>Find Jobs</a></li>
                        <li><a class="nav-link scrollto p-2 p-lg-3" href=@Url.Action("homeuser", "signuser")#contact>Contact</a></li>
                        <li><a href="#">Privacy policy</a></li>
                    </ul>
                </div>

                <div class="col-lg-2 col-6 footer-links">
                    <h4>Our Category</h4>
                    <ul>
                        <li><a href="#">Web Design</a></li>
                        <li><a href="#">Web Development</a></li>
                        <li><a href="#">Product Management</a></li>
                        <li><a href="#">Marketing</a></li>
                        <li><a href="#">Graphic Design</a></li>
                    </ul>
                </div>

                <div class="col-lg-3 col-md-12 footer-contact text-center text-md-start">
                    <h4>Contact Us</h4>
                    <p>
                        A108 Adam Street <br>
                        New York, NY 535022<br>
                        United States <br><br>
                        <strong>Phone:</strong> +1 5589 55488 55<br>
                        <strong>Email:</strong> Wuzfni@gmail.com<br>
                    </p>

                </div>

            </div>
        </div>

        <div class="container mt-4">
            <div class="copyright">
                &copy; Copyright <strong><span>Wuzfni</span></strong>. All Rights Reserved
            </div>
            <div class="credits">
                <!-- All the links in the footer should remain intact. -->
                <!-- You can delete the links only if you purchased the pro version. -->
                <!-- Licensing information: https://bootstrapmade.com/license/ -->
                <!-- Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/logis-bootstrap-logistics-website-template/ -->
                Designed by <a href=" Wuzfni@gmail.com">Wuzfni</a>
            </div>
        </div>

    </footer>
    <!-- End Footer -->

    <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

    <!-- Vendor JS Files -->
    <script src="~/vendor/purecounter/purecounter_vanilla.js"></script>
    <script src="~/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="~/vendor/glightbox/js/glightbox.min.js"></script>
    <script src="~/vendor/isotope-layout/isotope.pkgd.min.js"></script>
    <script src="~/vendor/swiper/swiper-bundle.min.js"></script>
    <script src="~/vendor/php-email-form/validate.js"></script>

    <!-- Template Main JS File -->
    <script src="~/js/main.js"></script>
    <script src="~/js/login.js"></script>
    <script>
        const showFormButton = document.getElementById('showFormButton');
        const formOverlay = document.getElementById('formOverlay');
        const closeFormButton = document.getElementById('closeFormButton');
        const jobForm = document.getElementById('jobForm');
                 const successMessage = document.getElementById('successMessage');
                 const returnButton = document.getElementById('returnButton');

                showFormButton.addEventListener('click', () => {
                    formOverlay.style.display = 'flex';
                });


                closeFormButton.addEventListener('click', () => {
                    formOverlay.style.display = 'none';
                });


                window.addEventListener('click', (event) => {
                    if (event.target === formOverlay) {
                        formOverlay.style.display = 'none';
                    }
                });


                jobForm.addEventListener('submit', (event) => {
                    event.preventDefault();


                    jobForm.style.display = 'none';
                    successMessage.style.display = 'block';
                });


                returnButton.addEventListener('click', () => {

                    window.location.href = '';
                });
    </script>
</body>
</html>
